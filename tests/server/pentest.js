const workingID = 'uufuMrZnf6ipup5fP3LxPy';
const fs = require('fs');
const axios = require('axios');

const data = {
	payload: [],
	workingId: workingID
};
const files = fs.readdirSync(`../../temp/${workingID}`);
//fs.readFileSync(`../../temp/${workingFolder}/inputflow.json`, 'utf8');
files.forEach( label => {
	if(label.substring(label.length - 3) === 'xml') {
		const xml = fs.readFileSync(`../../temp/${workingID}/${label}`, 'utf8');
		data.payload.push({ label: label.substring(0, label.length - 4), xml});
	}
});

axios.request({url: 'http://localhost:8080/api/run', method: 'POST', data: data}).then( res => {
	console.log('DONE');
})